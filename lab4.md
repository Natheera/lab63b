#**การทดลองที่ 4 เรื่อง การเขียนโปรแกรมอินพุทสัญญาณดิจิทัล**

##**วัตถุประสงค์(อธิบายเป็นข้อๆ)**
1. เพื่อที่จะสามารถใช้ไมโครคอนโทรเลอร์ตัวนั้นได้ในสิ่งที่เราต้องการ
2. เพื่อที่จะสามารถ run program ลงไปโครคอนโทรเลอร์ได้สำเร็จ

##**อุปกรณ์ที่ใช้ (รายการอุปกรณ์)**
1. ไมโครคอนโทรเลอร์
2. USB
3. อแดปเตอร์

##**ศึกษาข้อมูลเบื้องต้น (แหล่งข้อมูลเพื่อการศึกษา)**
[YouTube](https://www.youtube.com/watch?v=nFqoZT26U5k)

##**วิธีการทำการทดลอง (ทำเป็นขั้นตอนพร้อมภาพประกอบ)**
1. ต่อ USB เข้า อแดปเตอร์ และค่อยนำไมโครคอนโทรเลอร์มาเสียบต่อ อแดปเตอร์ที่มีสายสีขาว(input port 0) เพื่อให้เห็นชัดเจนจึงต่อเข้าLED และสายเหลือง(out put port 2)เพื่อให้เห็นชัดเจนจึงต่อเข้าLED อีกที [![Image](https://imgbb.com/)](https://ibb.co/v3hwY5V) ถ้าเสียบช่องผิด ตอนกดปุ่มเพื่อ upload จะ fail [![Image](https://imgbb.com/)](https://ibb.co/Y4SyWrv)
2. พิมพ์ platformio.ini src และพิมพ์ vi src/main.cpp ซึ่งเป็นโปรแกรม 04 Input portไว้ทดสอบไมโครคอนโทรเลอร์ ซึ่งเขียนด้วยภาษา C/C++ มี 2 ส่วน ส่วนแรก คือส่วน setup() ซึ่งจะ run ครั้งเดียว ซึ่งจะ set เลข 0 ให้เป็น input และ set เลข 2 เป็น out put ออกที่ความเร็ว 115200  และส่วนที่สอง คือส่วน loop() ก็จะ run วนloop ตลอดไป ซึ่งจะอ่านข้อมูลจาก port 0 ให้เป็นสัญญาณ digital 0 หรือ 1 และจะเช็คว่า สัญญาณdigitalออก 1 ไฟจะดับmี่ port 2 ถ้าไม่เท่ากับ2 ไฟจะติด ที่ port 2 โดยที่run ทุกๆ 100 ms (0.1วินาที) [![Image](https://imgbb.com/)](https://ibb.co/6t6zYy0)
3. พิมพ์ pio run -t upload เพื่อที่จะ upload โปรแกรมลงไมโครคอนโทรเลอร์ ในขณะที่ run ก็กดปุ่มดำเพื่อบอกให้มัน load โหลดช้าเร็วขึ้นกับความเร็วของมัน(https://imgbb.com/)](https://ibb.co/hMpLRTB) [![Image](https://imgbb.com/)](https://ibb.co/ZWsY9FD)
4. เมื่อโหลดเสร็จแล้ว พิมพ์ pio device monitor เพื่อดูผลลัพธ์ที่แสดงบนหน้าจอ monitor [![Image](https://imgbb.com/)](https://ibb.co/6XxZFPn)
5. ถ้านำสายไฟสีขาวไปต่อที่สายไฟสีดำ ของหลอดไฟ จะทำให้ digital อ่านออกมาได้ เป็น 0 ไฟติด  แต่ถ้านำไปต่อกัยสายอื่นที่ไม่ใช่สายดำ หรือไม่ได้ต่อกัยสายไหนเลย digital จะอ่านออกมาได้ 1 ไฟดับ[![Image](https://imgbb.com/)](https://ibb.co/Y3PF8pC) [![Image](https://imgbb.com/)](https://ibb.co/1dT6yDk) 
6. ถ้ากดปุ่มสีดำที่ตัวไมโครคอนโทรเลอร์ ซึ่งตั้งว่า port 0 digitalsอ่านได้ 0 ไฟติด แต่ถ้าปล่อยไม่ไปกดปุ่มดำ digital อ่านได้ 1 ไฟดับ [Image](https://imgbb.com/)](https://ibb.co/jkNnZvW) [![Image](https://imgbb.com/)](https://ibb.co/YXhfgvQ) 
7. ถ้าต่อsensor กับตัวต้านทาน ไฟ 3V ที่ CPU เข้า port 0 อีกขาต่อกับเส้นสีดำ คือ ground ขากลางคือ sensor ใช้สายไฟเส้นสีขาวมาต่อ [![Image](https://imgbb.com/)](https://ibb.co/R76PC4q) 
8. ถ้ามีแสงสว่างเข้ามาจะเป็น 0V [![Image](https://imgbb.com/)](https://ibb.co/ckStJT9)  แต่ถ้ามืดจะเป็น 1V เพราะแรงต้านทานจะสูงขึ้น [![Image](https://imgbb.com/)](https://ibb.co/crqLg7z)  

##**การบันทึกผลการทดลอง (พร้อมตัวอย่าง)**

####### ดูผลลัพธ์ที่แสดงบนหน้าจอ monitor จะเห็นว่านำสายไฟสีขาวไปต่อที่สายไฟสีดำ ของหลอดไฟ จะทำให้ digital อ่านออกมาได้ เป็น 0 ไฟติด  แต่ถ้านำไปต่อกัยสายอื่นที่ไม่ใช่สายดำ หรือไม่ได้ต่อกัยสายไหนเลย digital จะอ่านออกมาได้ 1 ไฟดับ[![Image](https://imgbb.com/)](https://ibb.co/Y3PF8pC) [![Image](https://imgbb.com/)](https://ibb.co/1dT6yDk) 
หรือ กดปุ่มสีดำที่ตัวไมโครคอนโทรเลอร์ ซึ่งตั้งว่า port 0 digitalsอ่านได้ 0 ไฟติด แต่ถ้าปล่อยไม่ไปกดปุ่มดำ digital อ่านได้ 1 ไฟดับ [Image](https://imgbb.com/)](https://ibb.co/jkNnZvW) [![Image](https://imgbb.com/)](https://ibb.co/YXhfgvQ)  
หรือ ต่อsensor กับตัวต้านทาน ไฟ 3V ที่ CPU เข้า port 0 อีกขาต่อกับเส้นสีดำ คือ ground ขากลางคือ sensor ใช้สายไฟเส้นสีขาวมาต่อ [![Image](https://imgbb.com/)](https://ibb.co/R76PC4q) 
ถ้ามีแสงสว่างเข้ามาจะเป็น 0V [![Image](https://imgbb.com/)](https://ibb.co/ckStJT9)  แต่ถ้ามืดจะเป็น 1V เพราะแรงต้านทานจะสูงขึ้น [![Image](https://imgbb.com/)](https://ibb.co/crqLg7z)  

##**อภิปรายผลการทดลอง (พร้อมตัวอย่าง)**

####### ส่วน loop() จะ run วนloop ตลอดไป ซึ่งจะอ่านข้อมูลจาก port 0 ให้เป็นสัญญาณ digital 0 หรือ 1 และจะเช็คว่า สัญญาณdigitalออก 1 ไฟจะดับmี่ port 2 ถ้าไม่เท่ากับ2 ไฟจะติด ที่ port 2 โดยที่run ทุกๆ 100 ms (0.1วินาที) [![Image](https://imgbb.com/)](https://ibb.co/6t6zYy0)

##**คำถามหลังการทดลอง (พร้อมตัวอย่างคำตอบ)**

####### ถ้านำสายไฟสีขาวไปต่อที่สายไฟสีดำ ของหลอดไฟ จะทำให้ digital อ่านออกมาเป็นเลขอะไร และเกิดอะไรขึ้น

####### ANS ได้เป็น 0 ไฟติด
